<?php
/**
* @link              http://thewpleague.com
* @package           WP_POWERUP
*
* @wordpress-plugin
* Plugin Name:       Better SEO automatically remove stop words from slug
* Plugin URI:        http://thewpleague.com/wp-powerup/
* Description:       The snippet will automatically remove stop words from the slug for better SEO.
* Version:           1.0.0
* Author:            TheWpLeague
* Author URI:        http://thewpleague.com/
*/

add_filter( 'sanitize_title', 'wpl_better_seo_remove_stop_words' );
function wpl_better_seo_remove_stop_words( $slug ) {

	if ( ! is_admin() ) {
		return $slug;
	}

	// stop words list
	$stop_words = explode( ',', "a,fm,name,themselves,'ll,fo,namely,then,'ve,followed,nay,thence,a's,following,nc,there,able,follows,nd,there'd,about,for,ne,there'll,above,forever,near,there're,abroad,former,nearly,there's,abst,formerly,necessarily,there've,accordance,forth,necessary,thereafter,according,forty,need,thereby,accordingly,forward,needn't,thered,across,found,needn’t,therefore,act,four,needs,therein,actually,fr,neither,thereof,ad,free,net,therere,added,from,netscape,theres,adj,front,never,thereto,ae,full,neverf,thereupon,af,further,neverless,there’d,affected,furthermore,nevertheless,there’ll,affecting,fx,new,there’re,affects,ga,next,there’s,after,gave,nf,there’ve,afterwards,gb,ng,these,ag,gd,ni,they,again,ge,nine,they'd,against,get,ninety,they'll,ago,gets,nl,they're,ah,getting,no,they've,ahead,gf,no-one,theyd,ai,gg,nobody,theyre,ain't,gh,non,they’d,ain’t,gi,none,they’ll,al,give,nonetheless,they’re,all,given,noone,they’ve,allow,gives,nor,thick,allows,giving,normally,thin,almost,gl,nos,thing,alone,gm,not,things,along,gmt,noted,think,alongside,gn,nothing,third,already,go,notwithstanding,thirty,also,goes,novel,this,although,going,now,thorough,always,gone,nowhere,thoroughly,am,got,np,those,amid,gotten,nr,thou,amidst,gov,nu,though,among,gp,NULL,thoughh,amongst,gq,nz,thousand,amoungst,gr,obtain,three,amount,greetings,obtained,throug,an,gs,obviously,through,and,gt,of,throughout,announce,gu,off,thru,another,gw,often,thus,any,gy,oh,til,anybody,had,ok,till,anyhow,hadn't,okay,tip,anymore,hadn’t,old,tj,anyone,half,om,tk,anything,happens,omitted,tm,anyway,hardly,on,tn,anyways,has,once,to,anywhere,hasn,one,together,ao,hasn't,one's,too,apart,hasnt,ones,took,apparently,hasn’t,one’s,top,appear,have,only,toward,appreciate,haven,onto,towards,appropriate,haven't,opposite,tp,approximately,haven’t,or,tr,aq,having,ord,tried,ar,he,org,tries,are,he'd,other,trillion,aren,he'll,others,truly,aren't,he's,otherwise,try,arent,hed,ought,trying,aren’t,hello,oughtn't,ts,arise,help,oughtn’t,tt,around,hence,our,tv,arpa,her,ours,tw,as,here,ourselves,twelve,aside,here's,out,twenty,ask,hereafter,outside,twice,asking,hereby,over,two,associated,herein,overall,tz,at,heres,owing,ua,au,hereupon,own,ug,auth,here’s,pa,uk,available,hers,page,um,aw,herse",pages,un,away,herself,part,under,awfully,hes,particular,underneath,az,he’d,particularly,undoing,ba,he’ll,past,unfortunately,back,he’s,pe,unless,backward,hi,per,unlike,backwards,hid,perhaps,unlikely,bb,him,pf,until,bd,himse",pg,unto,be,himself,ph,up,became,his,pk,upon,because,hither,pl,ups,become,hk,placed,upwards,becomes,hm,please,us,becoming,hn,plus,use,been,home,pm,used,before,homepage,pn,useful,beforehand,hopefully,poorly,usefully,begin,how,possible,usefulness,beginning,how's,possibly,uses,beginnings,howbeit,potentially,using,begins,however,pr,usually,behind,hr,predominantly,uy,being,ht,present,uz,believe,htm,presumably,va,below,html,previously,value,beside,http,primarily,various,besides,hu,probably,vc,best,hundred,promptly,ve,better,i'd,proud,versus,between,i'll,provided,very,beyond,i'm,provides,vg,bf,i've,pt,vi,bg,i.e.,put,via,bh,id,pw,viz,bi,ie,py,vn,bill,if,qa,vol,billion,ignored,que,vols,biol,ii,quickly,vs,bj,il,quite,vs.,bm,im,qv,vu,bn,immediate,ran,want,bo,immediately,rather,wants,both,importance,rd,was,bottom,important,re,wasn,br,in,readily,wasn't,brief,inasmuch,really,wasnt,briefly,inc,reasonably,wasn’t,bs,inc.,recent,way,bt,indeed,recently,we,but,index,ref,we'd,buy,indicate,refs,we'll,bv,indicated,regarding,we're,bw,indicates,regardless,we've,by,information,regards,web,bz,inner,related,webpage,c'mon,inside,relatively,website,c's,insofar,research,wed,ca,instead,reserved,welcome,call,int,respectively,well,came,interest,resulted,went,can,into,resulting,were,can't,invention,results,weren,cannot,inward,right,weren't,cant,io,ring,werent,can’t,iq,ro,weren’t,caption,ir,round,we’d,cause,is,ru,we’ll,causes,isn,run,we’re,cc,isn't,rw,we’ve,cd,isn’t,sa,wf,certain,it,said,what,certainly,it'd,same,what'll,cf,it'll,saw,what's,cg,it's,say,what've,ch,itd,saying,whatever,changes,its,says,whats,ci,itse",sb,what’ll,ck,itself,sc,what’s,cl,it’d,sd,what’ve,clearly,it’ll,se,when,click,it’s,sec,when's,cm,i’d,second,whence,cn,i’ll,secondly,whenever,co,i’m,section,where,co.,i’ve,see,where's,com,je,seeing,whereafter,come,jm,seem,whereas,comes,jo,seemed,whereby,computer,join,seeming,wherein,con,jp,seems,wheres,concerning,just,seen,whereupon,consequently,ke,self,wherever,consider,keep,selves,where’s,considering,keeps,sensible,whether,contain,kept,sent,which,containing,kg,serious,whichever,contains,kh,seriously,while,copy,ki,seven,whilst,corresponding,km,seventy,whim,could,kn,several,whither,couldn,know,sg,who,couldn't,known,sh,who'd,couldnt,knows,shall,who'll,couldn’t,kp,shan't,who's,course,kr,shan’t,whod,cr,kw,she,whoever,cry,ky,she'd,whole,cs,kz,she'll,whom,cu,la,she's,whomever,currently,largely,shed,whos,cv,last,shes,whose,cx,lately,she’d,who’d,cy,later,she’ll,who’ll,cz,latter,she’s,who’s,c’mon,latterly,should,why,dare,lb,shouldn,why's,daren't,lc,shouldn't,widely,daren’t,least,shouldn’t,width,date,length,show,will,de,less,showed,willing,definitely,lest,shown,wish,describe,let,showns,with,described,let's,shows,within,despite,lets,si,without,detail,let’s,side,won,did,li,significant,won't,didn,like,significantly,wonder,didn't,liked,similar,wont,didn’t,likely,similarly,won’t,different,likewise,since,words,directly,line,sincere,world,dj,little,site,would,dk,lk,six,wouldn,dm,ll,sixty,wouldn't,do,look,sj,wouldnt,does,looking,sk,wouldn’t,doesn,looks,sl,ws,doesn't,low,slightly,www,doesn’t,lower,sm,ye,doing,lr,sn,yes,don,ls,so,yet,don't,lt,some,you,done,ltd,somebody,you'd,don’t,lu,someday,you'll,down,lv,somehow,you're,downwards,ly,someone,you've,due,ma,somethan,youd,during,made,something,your,dz,mainly,sometime,youre,each,make,sometimes,yours,ec,makes,somewhat,yourself,ed,many,somewhere,yourselves,edu,may,soon,you’d,ee,maybe,sorry,you’ll,effect,mayn't,specifically,you’re,eg,mayn’t,specified,you’ve,eh,mc,specify,yt,eight,md,specifying,yu,eighty,me,sr,za,either,mean,st,zero,eleven,means,still,zm,else,meantime,stop,zr,elsewhere,meanwhile,strongly,themselves,empty,merely,su,then,en,mg,sub,thence,end,mh,substantially,there,ending,microsoft,successfully,there'd,enough,might,such,there'll,entirely,mightn't,sufficiently,there're,er,mil,suggest,there's,es,mill,sup,there've,especially,million,sure,thereafter,et,mine,sv,thereby,et-al,minus,sy,thered,etc,miss,system,therefore,even,mk,sz,therein,ever,ml,t's,thereof,evermore,mm,take,therere,every,mn,taken,theres,everybody,mo,taking,thereto,everyone,more,tc,thereupon,everything,moreover,td,there’d,everywhere,most,tell,there’ll,ex,mostly,ten,there’re,exactly,move,tends,there’s,example,mp,test,there’ve,except,mq,text,these,fairly,mr,tf,they,far,mrs,tg,they'd,farther,ms,th,they'll,few,msie,than,they're,fewer,mt,thank,they've,ff,mu,thanks,theyd,fi,much,thanx,theyre,fifteen,mug,that,they’d,fifth,must,that'll,they’ll,fifty,mustn't,that's,they’re,fify,mustn’t,that've,they’ve,fill,mv,thats,thick,find,mw,that’ll,thin,fire,mx,that’s,thing,first,my,that’ve,things,five,myse",the,think,fix,myself,their,third,fj,mz,theirs,thirty,fk,na,them,this" );

	$slug = explode( '-', $slug );
	$slug = array_diff( $slug, $stop_words );

	return join( '-', $slug );
}
